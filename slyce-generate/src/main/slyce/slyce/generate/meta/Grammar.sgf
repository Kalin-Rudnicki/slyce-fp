
@start: Grammar

Grammar : "@start" nonTerminal (^NonTerminal ";")+
        ;

ElementList          + Element
                     ;
UnIgnoredElementList : Element
                     | Element* "^" Element Element*
                     ;

NonTerminal : nonTerminal NTBody
NTBody      ^ StandardNT
            | ListNT
            | AssocNT
            ;

StandardNT ^ BasicNT
           | LiftNT
           ;
BasicNT    : ":" (ElementList . "|" ^ElementList)+
           ;
LiftNT     : "^" (UnIgnoredElementList . "|" ^UnIgnoredElementList)+
           ;

ListNT : listType UnIgnoredElementList
       | listType UnIgnoredElementList "." UnIgnoredElementList
       ;

AssocNT   : "~" (AssocPair . "|" ^AssocPair)+ StandardNT
          ;
AssocPair : assocType Element
          ;

Element       : NonOptElement "?"?
              ;
AnonList      : Element listType
              | "(" UnIgnoredElementList ")" listType
              | "(" UnIgnoredElementList "." UnIgnoredElementList ")" listType
              ;
NonOptElement : nonTerminal
              | terminal
              | raw
              | AnonList
              ;
